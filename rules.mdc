---
alwaysApply: true
version: 2.0
lastUpdated: 2024
---

# ğŸ† Football Online - EspecificaÃ§Ã£o TÃ©cnica Completa

> **Aplicativo mobile de futebol online multiplayer em tempo real**  
> Desenvolvido em Flutter | Backend: Supabase (PostgreSQL)  
> Inspirado no Brasfoot com funcionalidades modernas de e-sports

---

## ğŸ“‹ Ãndice

1. [VisÃ£o Geral do Projeto](#1-visÃ£o-geral-do-projeto)
2. [Arquitetura e DecisÃµes TÃ©cnicas](#2-arquitetura-e-decisÃµes-tÃ©cnicas)
3. [Funcionalidades Detalhadas](#3-funcionalidades-detalhadas)
4. [Estrutura do Projeto](#4-estrutura-do-projeto)
5. [Regras de NegÃ³cio](#5-regras-de-negÃ³cio)
6. [Design System](#6-design-system)
7. [Requisitos NÃ£o-Funcionais](#7-requisitos-nÃ£o-funcionais)
8. [Roadmap e Fases](#8-roadmap-e-fases)
9. [PadrÃµes de CÃ³digo](#9-padrÃµes-de-cÃ³digo)
10. [APIs e IntegraÃ§Ãµes](#10-apis-e-integraÃ§Ãµes)

---

## 1. VisÃ£o Geral do Projeto

### 1.1 Objetivo
Criar uma experiÃªncia imersiva de futebol online multiplayer com:
- Partidas em tempo real com sincronizaÃ§Ã£o precisa
- Sistema de ranking competitivo (ELO)
- Torneios e eventos sazonais
- Recursos sociais (amigos, ligas, chat)
- Economia do jogo (moedas, melhorias, cosmÃ©ticos)

### 1.2 PÃºblico-Alvo
- **PrimÃ¡rio**: Jogadores casuais de futebol (18-35 anos)
- **SecundÃ¡rio**: Competitivos que buscam ranking e torneios
- **TerciÃ¡rio**: Comunidades e grupos de amigos

### 1.3 Plataformas
- âœ… **Android** (prioridade)
- âœ… **iOS**
- ğŸ”„ **Web** (fase 2)
- ğŸ”„ **Desktop** (fase 3)

---

## 2. Arquitetura e DecisÃµes TÃ©cnicas

### 2.1 Stack TecnolÃ³gico

#### Frontend
```
Flutter 3.3.4+
â”œâ”€â”€ State Management: Riverpod 2.4.9
â”œâ”€â”€ Navigation: GoRouter 13.0.0
â”œâ”€â”€ Real-time: WebSocket Channel 2.4.0
â”œâ”€â”€ HTTP: http 1.1.2
â””â”€â”€ Database: supabase_flutter (a adicionar)
```

#### Backend
```
Supabase (BaaS)
â”œâ”€â”€ Database: PostgreSQL
â”œâ”€â”€ Auth: Supabase Auth
â”œâ”€â”€ Real-time: Supabase Realtime
â”œâ”€â”€ Storage: Supabase Storage (avatars, assets)
â””â”€â”€ Edge Functions: Deno (lÃ³gica de jogo)
```

#### Infraestrutura
- **Hosting**: Supabase Cloud
- **CDN**: Supabase Edge Network
- **Monitoring**: Supabase Dashboard + Sentry (opcional)

### 2.2 Arquitetura do CÃ³digo

**PadrÃ£o: Clean Architecture + Feature-First**

```
lib/
â”œâ”€â”€ core/                    # CÃ³digo compartilhado
â”‚   â”œâ”€â”€ constants/          # Constantes da aplicaÃ§Ã£o
â”‚   â”œâ”€â”€ theme/              # Tema e estilos
â”‚   â”œâ”€â”€ utils/              # UtilitÃ¡rios gerais
â”‚   â””â”€â”€ errors/             # Tratamento de erros
â”‚
â”œâ”€â”€ features/               # MÃ³dulos por feature
â”‚   â”œâ”€â”€ auth/              # AutenticaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ data/          # Camada de dados
â”‚   â”‚   â”œâ”€â”€ domain/        # Camada de domÃ­nio
â”‚   â”‚   â””â”€â”€ presentation/  # Camada de apresentaÃ§Ã£o
â”‚   â”œâ”€â”€ match/             # Partidas
â”‚   â”œâ”€â”€ ranking/           # Ranking e ELO
â”‚   â”œâ”€â”€ tournament/        # Torneios
â”‚   â”œâ”€â”€ profile/           # Perfil do usuÃ¡rio
â”‚   â””â”€â”€ social/            # Amigos, chat, ligas
â”‚
â””â”€â”€ shared/                # Componentes compartilhados
    â”œâ”€â”€ widgets/           # Widgets reutilizÃ¡veis
    â”œâ”€â”€ utils/             # UtilitÃ¡rios compartilhados
    â””â”€â”€ extensions/         # Extensions Dart
```

### 2.3 Fluxo de Dados

```
UI (Widgets)
    â†“
Providers (Riverpod)
    â†“
Use Cases (Business Logic)
    â†“
Repositories (Data Abstraction)
    â†“
Data Sources (Supabase/API)
    â†“
Database/Backend
```

### 2.4 DecisÃµes TÃ©cnicas Confirmadas

| DecisÃ£o | Escolha | Status |
|---------|---------|--------|
| Framework Frontend | Flutter | âœ… Confirmado |
| State Management | Riverpod | âœ… Confirmado |
| NavegaÃ§Ã£o | GoRouter | âœ… Confirmado |
| Backend | Supabase | âœ… Confirmado |
| Banco de Dados | PostgreSQL | âœ… Confirmado |
| Real-time | Supabase Realtime + WebSockets | âœ… Confirmado |
| AutenticaÃ§Ã£o | Supabase Auth | âœ… Confirmado |

---

## 3. Funcionalidades Detalhadas

### 3.1 Sistema de AutenticaÃ§Ã£o

#### 3.1.1 MÃ©todos de Login
- **Email/Senha**: Cadastro tradicional
- **OAuth Social**: Google, Facebook (fase 2)
- **AnÃ´nimo**: Modo guest temporÃ¡rio (fase 2)

#### 3.1.2 Fluxo de AutenticaÃ§Ã£o
```
1. Tela de Login/Cadastro
2. ValidaÃ§Ã£o de dados
3. AutenticaÃ§Ã£o via Supabase Auth
4. CriaÃ§Ã£o de perfil inicial (se novo usuÃ¡rio)
5. Redirecionamento para Home
```

#### 3.1.3 Perfil Inicial
**Ao fazer cadastro, o usuÃ¡rio recebe:**
- Nome de usuÃ¡rio Ãºnico
- Avatar padrÃ£o (customizÃ¡vel depois)
- ELO inicial: 1000
- DivisÃ£o inicial: Bronze
- **Moedas iniciais: 500** (para comprar jogadores iniciais)
- Time inicial: Time bÃ¡sico com 11 jogadores de nÃ­vel 1

**Fluxo de Cadastro:**
```
1. UsuÃ¡rio preenche email, senha e nome de usuÃ¡rio
2. Conta criada no Supabase Auth
3. Perfil criado na tabela profiles
4. Time inicial criado com 11 jogadores bÃ¡sicos
5. 500 moedas creditadas na conta
6. Redirecionamento para tela de montagem de time
```

### 3.2 Modos de Jogo

#### 3.2.1 Partida RÃ¡pida (Quick Match)
**CaracterÃ­sticas:**
- Busca automÃ¡tica de oponente
- DuraÃ§Ã£o: 5-10 minutos reais (90 min de jogo)
- Sem impacto no ranking
- Recompensas: Moedas base (50-100)
- Objetivo: DiversÃ£o e prÃ¡tica

**Fluxo:**
```
1. UsuÃ¡rio clica "Play Now"
2. Sistema busca oponente disponÃ­vel
3. Matchmaking rÃ¡pido (sem filtro de ELO)
4. InÃ­cio imediato da partida
5. Resultado nÃ£o afeta ranking
```

#### 3.2.2 Partida Rankeada
**CaracterÃ­sticas:**
- Matchmaking baseado em ELO (Â±200 pontos)
- DuraÃ§Ã£o: 5-10 minutos reais
- Impacto no ranking (ganha/perde ELO)
- Recompensas: Moedas + pontos de ranking
- HistÃ³rico registrado

**Fluxo:**
```
1. UsuÃ¡rio seleciona "Ranked Match"
2. Sistema busca oponente com ELO similar
3. Tempo de espera: 30-60 segundos
4. Partida iniciada
5. Resultado atualiza ELO de ambos
6. Recompensas distribuÃ­das
```

#### 3.2.3 Torneios
**CaracterÃ­sticas:**
- Torneios semanais/mensais
- Sistema eliminatÃ³rio (bracket)
- InscriÃ§Ã£o com limite (16, 32, 64 participantes)
- PremiaÃ§Ã£o: Moedas + Badges exclusivos
- HorÃ¡rios agendados

**Estrutura:**
```
Fase de InscriÃ§Ã£o (3 dias)
    â†“
Sorteio de Chaves
    â†“
Oitavas de Final
    â†“
Quartas de Final
    â†“
Semifinal
    â†“
Final
    â†“
PremiaÃ§Ã£o
```

#### 3.2.4 Liga de Amigos
**CaracterÃ­sticas:**
- Criar ligas privadas
- Convidar atÃ© 20 amigos
- Tabela de classificaÃ§Ã£o prÃ³pria
- Partidas entre membros
- Temporadas mensais

### 3.3 Sistema de Times

#### 3.3.1 Escolha de Time
**OpÃ§Ãµes:**
- Times nacionais (Brasil, Argentina, etc.)
- Clubes (Flamengo, Corinthians, etc.)
- Times customizados (futuro)

**EstatÃ­sticas do Time:**
```dart
class Team {
  final String id;
  final String name;
  final int attack;      // 0-100
  final int defense;     // 0-100
  final int midfield;    // 0-100
  final Formation formation;
  final List<Player> players;
}
```

**FormaÃ§Ãµes DisponÃ­veis:**
- 4-4-2 (Balanceada)
- 4-3-3 (Ofensiva)
- 3-5-2 (Meio-campo forte)
- 5-3-2 (Defensiva)
- 4-2-3-1 (Controle)

#### 3.3.2 Gerenciamento de Time

**Sistema de Jogadores:**
Cada jogador possui:
- **Nome**: Nome do jogador
- **PosiÃ§Ã£o**: Goleiro, Zagueiro, Lateral, Volante, Meia, Atacante
- **NÃ­vel**: 1 a 10 (determina o potencial mÃ¡ximo)
- **EstatÃ­sticas**: Ataque, Defesa, Meio-campo, Velocidade (0-100)
- **ExperiÃªncia (XP)**: Ganha XP ao jogar partidas
- **Valor**: Custo em moedas para comprar/vender

**Compra de Jogadores:**
- **Mercado de Jogadores**: Lista de jogadores disponÃ­veis para compra
- **PreÃ§os baseados em nÃ­vel**:
  - NÃ­vel 1-2: 50-150 moedas
  - NÃ­vel 3-4: 200-400 moedas
  - NÃ­vel 5-6: 500-800 moedas
  - NÃ­vel 7-8: 1000-1500 moedas
  - NÃ­vel 9-10: 2000-5000 moedas
- **Rotatividade**: Mercado atualiza diariamente com novos jogadores
- **Limite de elenco**: MÃ¡ximo 25 jogadores no elenco
- **EscalaÃ§Ã£o**: 11 jogadores titulares + 7 reservas

**EvoluÃ§Ã£o de Jogadores:**
- **Ganho de XP**: Jogadores ganham XP ao participar de partidas
  - VitÃ³ria: +50 XP
  - Empate: +25 XP
  - Derrota: +10 XP
  - Gols marcados: +20 XP por gol
  - AssistÃªncias: +15 XP por assistÃªncia
- **Melhorias com Moedas**: 
  - **Treinamento BÃ¡sico**: 100 moedas â†’ +5 em uma estatÃ­stica
  - **Treinamento AvanÃ§ado**: 250 moedas â†’ +10 em uma estatÃ­stica
  - **Treinamento Elite**: 500 moedas â†’ +15 em uma estatÃ­stica
  - **Treinamento Completo**: 1000 moedas â†’ +5 em todas as estatÃ­sticas
- **Limite de Melhorias**: 
  - EstatÃ­sticas nÃ£o podem ultrapassar: NÃ­vel Ã— 10
  - Exemplo: Jogador nÃ­vel 5 â†’ mÃ¡ximo 50 em cada stat
- **Subida de NÃ­vel**: 
  - Ao atingir XP mÃ¡ximo do nÃ­vel atual, jogador sobe de nÃ­vel
  - Novo nÃ­vel desbloqueia potencial para melhorias maiores
  - Custo para subir de nÃ­vel: 200 moedas Ã— nÃ­vel atual

**Venda de Jogadores:**
- Jogadores podem ser vendidos por 50% do valor de compra
- Jogadores evoluÃ­dos mantÃªm parte do valor investido
- Venda instantÃ¢nea (sem mercado de leilÃµes inicialmente)

**Economia do Time:**
- **Ganhar Moedas**:
  - VitÃ³rias em partidas: 50-100 moedas
  - Partidas rankeadas: 100-150 moedas
  - Torneios: 500-5000 moedas
  - Objetivos diÃ¡rios: 50-200 moedas
  - Recompensas semanais por divisÃ£o
- **Gastar Moedas**:
  - Comprar jogadores: 50-5000 moedas
  - Melhorar jogadores: 100-1000 moedas
  - Subir nÃ­vel de jogador: 200-2000 moedas
  - Skins de uniforme: 200-1000 moedas (cosmÃ©ticos)

### 3.4 MecÃ¢nica de Jogo

#### 3.4.1 Partida em Tempo Real
**DuraÃ§Ã£o:**
- 90 minutos de jogo (acelerado)
- 5-10 minutos reais
- 2 tempos de 45 minutos cada

**Controles:**
- **Toque simples**: Passar bola
- **Toque longo**: Chute ao gol
- **Swipe**: Drible
- **BotÃµes**: AÃ§Ãµes especiais (faltas, escanteios)

**AÃ§Ãµes DisponÃ­veis:**
```
Ataque:
â”œâ”€â”€ Passe curto
â”œâ”€â”€ Passe longo
â”œâ”€â”€ Chute ao gol
â”œâ”€â”€ Drible
â””â”€â”€ Cruzamento

Defesa:
â”œâ”€â”€ InterceptaÃ§Ã£o
â”œâ”€â”€ Cabeceio
â”œâ”€â”€ Defesa do goleiro
â””â”€â”€ Faltas tÃ¡ticas
```

#### 3.4.2 SincronizaÃ§Ã£o
**EstratÃ©gia:**
- Servidor autoritativo (Supabase Edge Function)
- ValidaÃ§Ã£o de todas as aÃ§Ãµes no servidor
- SincronizaÃ§Ã£o a cada 100ms
- Sistema de reconciliaÃ§Ã£o para conflitos
- PrevisÃ£o client-side para responsividade

**Fluxo:**
```
Cliente â†’ AÃ§Ã£o do jogador
    â†“
Envio via WebSocket
    â†“
ValidaÃ§Ã£o no servidor
    â†“
AtualizaÃ§Ã£o do estado do jogo
    â†“
Broadcast para ambos jogadores
    â†“
AtualizaÃ§Ã£o da UI
```

#### 3.4.3 EstatÃ­sticas da Partida
- Posse de bola (%)
- Chutes ao gol (total e no alvo)
- Escanteios
- Faltas
- CartÃµes (amarelo/vermelho)
- Gols marcados/sofridos
- Passes completos/tentados

### 3.5 Sistema de Ranking

#### 3.5.1 CÃ¡lculo de ELO
**FÃ³rmula:**
```
Novo_ELO = ELO_Atual + K Ã— (Resultado - Esperado)

Onde:
- K = 32 (fator de ajuste)
- Resultado = 1 (vitÃ³ria), 0.5 (empate), 0 (derrota)
- Esperado = 1 / (1 + 10^((ELO_Oponente - ELO_Atual) / 400))
```

**Exemplo:**
```
Jogador A: ELO 1200
Jogador B: ELO 1000

Esperado_A = 1 / (1 + 10^((1000-1200)/400)) = 0.76

Se A vence:
Novo_ELO_A = 1200 + 32 Ã— (1 - 0.76) = 1207.68 â‰ˆ 1208

Se A perde:
Novo_ELO_A = 1200 + 32 Ã— (0 - 0.76) = 1175.68 â‰ˆ 1176
```

#### 3.5.2 DivisÃµes/Ligas
| DivisÃ£o | ELO MÃ­nimo | ELO MÃ¡ximo | Recompensa Semanal |
|---------|------------|------------|-------------------|
| Bronze | 0 | 999 | 50 moedas |
| Prata | 1000 | 1499 | 100 moedas |
| Ouro | 1500 | 1999 | 200 moedas |
| Platina | 2000 | 2499 | 350 moedas |
| Diamante | 2500 | 2999 | 500 moedas |
| Mestre | 3000 | 3499 | 750 moedas |
| LendÃ¡rio | 3500+ | âˆ | 1000 moedas |

#### 3.5.3 PromoÃ§Ã£o/Rebaixamento
- **Subir**: Atingir ELO mÃ­nimo da divisÃ£o superior
- **Rebaixar**: Cair abaixo do ELO mÃ­nimo da divisÃ£o atual
- **ProteÃ§Ã£o**: 3 partidas de graÃ§a apÃ³s promoÃ§Ã£o (nÃ£o rebaixa)

### 3.6 Sistema Social

#### 3.6.1 Amigos
- Adicionar/remover amigos
- Lista de amigos online
- Desafiar para partida amigÃ¡vel
- Ver estatÃ­sticas de amigos

#### 3.6.2 Chat
**Tipos:**
- **In-game**: Emojis prÃ©-definidos durante partida
- **Lobby**: Chat global no menu principal
- **Privado**: Conversas 1-1 com amigos

**Emojis DisponÃ­veis:**
- ğŸ‘ Bom jogo
- ğŸ‘ ParabÃ©ns
- ğŸ˜„ Risada
- ğŸ˜¢ Tristeza
- âš½ Gol
- ğŸ¯ Quase
- ğŸ”¥ IncrÃ­vel

#### 3.6.3 Compartilhamento
- Compartilhar conquistas nas redes sociais
- Compartilhar resultados de partidas
- Compartilhar ranking e estatÃ­sticas

### 3.7 Sistema de Conquistas

#### 3.7.1 Conquistas DisponÃ­veis
```
VitÃ³rias:
â”œâ”€â”€ Primeira VitÃ³ria
â”œâ”€â”€ 10 VitÃ³rias
â”œâ”€â”€ 50 VitÃ³rias
â”œâ”€â”€ 100 VitÃ³rias
â””â”€â”€ 500 VitÃ³rias

Gols:
â”œâ”€â”€ Primeiro Gol
â”œâ”€â”€ Hat-trick (3 gols em 1 partida)
â”œâ”€â”€ Poker (4 gols em 1 partida)
â””â”€â”€ 100 Gols Marcados

Ranking:
â”œâ”€â”€ Subir para Prata
â”œâ”€â”€ Subir para Ouro
â”œâ”€â”€ Subir para Platina
â””â”€â”€ AlcanÃ§ar LendÃ¡rio

Especiais:
â”œâ”€â”€ Invicto (5 partidas sem perder)
â”œâ”€â”€ Goleada (vencer por 5+ gols)
â”œâ”€â”€ CampeÃ£o de Torneio
â””â”€â”€ 100 Partidas Jogadas
```

#### 3.7.2 TÃ­tulos e Badges
- "Goleador ImplacÃ¡vel" - 100+ gols
- "Muro Defensivo" - 50+ partidas sem sofrer gol
- "Rei do Meio-Campo" - 1000+ passes completos
- "Lenda do Futebol" - ELO 3500+
- "CampeÃ£o" - Vencer torneio
- "InvencÃ­vel" - 10 vitÃ³rias seguidas

---

## 4. Estrutura do Projeto

### 4.1 OrganizaÃ§Ã£o de Pastas

```
lib/
â”œâ”€â”€ main.dart                    # Entry point
â”‚
â”œâ”€â”€ core/                        # CÃ³digo compartilhado
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”œâ”€â”€ app_constants.dart  # Constantes gerais
â”‚   â”‚   â”œâ”€â”€ api_constants.dart  # URLs, endpoints
â”‚   â”‚   â””â”€â”€ game_constants.dart # Regras do jogo
â”‚   â”‚
â”‚   â”œâ”€â”€ theme/
â”‚   â”‚   â”œâ”€â”€ app_theme.dart      # Tema principal
â”‚   â”‚   â”œâ”€â”€ colors.dart         # Paleta de cores
â”‚   â”‚   â””â”€â”€ text_styles.dart    # Estilos de texto
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ validators.dart     # ValidaÃ§Ãµes
â”‚   â”‚   â”œâ”€â”€ formatters.dart     # Formatadores
â”‚   â”‚   â””â”€â”€ helpers.dart        # FunÃ§Ãµes auxiliares
â”‚   â”‚
â”‚   â””â”€â”€ errors/
â”‚       â”œâ”€â”€ exceptions.dart     # ExceÃ§Ãµes customizadas
â”‚       â””â”€â”€ failures.dart       # Failures (Either pattern)
â”‚
â”œâ”€â”€ features/                    # Features (Clean Architecture)
â”‚   â”‚
â”‚   â”œâ”€â”€ auth/                   # AutenticaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”‚   â”œâ”€â”€ models/         # UserModel, etc.
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/   # AuthRepositoryImpl
â”‚   â”‚   â”‚   â””â”€â”€ datasources/   # SupabaseAuthDataSource
â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/      # User entity
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/  # AuthRepository interface
â”‚   â”‚   â”‚   â””â”€â”€ usecases/      # LoginUseCase, SignUpUseCase
â”‚   â”‚   â””â”€â”€ presentation/
â”‚   â”‚       â”œâ”€â”€ screens/        # LoginScreen, SignUpScreen
â”‚   â”‚       â”œâ”€â”€ widgets/        # LoginForm, etc.
â”‚   â”‚       â””â”€â”€ providers/      # AuthProvider, etc.
â”‚   â”‚
â”‚   â”œâ”€â”€ match/                   # Partidas
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â””â”€â”€ presentation/
â”‚   â”‚
â”‚   â”œâ”€â”€ ranking/                # Ranking e ELO
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â””â”€â”€ presentation/
â”‚   â”‚
â”‚   â”œâ”€â”€ tournament/              # Torneios
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â””â”€â”€ presentation/
â”‚   â”‚
â”‚   â”œâ”€â”€ profile/                # Perfil do usuÃ¡rio
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â””â”€â”€ presentation/
â”‚   â”‚
â”‚   â””â”€â”€ social/                 # Amigos, chat, ligas
â”‚       â”œâ”€â”€ data/
â”‚       â”œâ”€â”€ domain/
â”‚       â””â”€â”€ presentation/
â”‚
â””â”€â”€ shared/                     # Componentes compartilhados
    â”œâ”€â”€ widgets/
    â”‚   â”œâ”€â”€ buttons/           # CustomButton, etc.
    â”‚   â”œâ”€â”€ cards/             # MatchCard, UserCard
    â”‚   â””â”€â”€ loading/           # LoadingIndicator
    â”œâ”€â”€ utils/
    â”‚   â””â”€â”€ extensions.dart    # Extensions Ãºteis
    â””â”€â”€ extensions/
        â”œâ”€â”€ string_extensions.dart
        â”œâ”€â”€ datetime_extensions.dart
        â””â”€â”€ context_extensions.dart
```

### 4.2 ConvenÃ§Ãµes de Nomenclatura

**Arquivos:**
- `snake_case.dart` para arquivos
- `PascalCase` para classes
- `camelCase` para variÃ¡veis e funÃ§Ãµes

**Exemplos:**
```
user_profile_screen.dart    â†’ UserProfileScreen
auth_repository.dart        â†’ AuthRepository
match_provider.dart         â†’ MatchProvider
```

**Pastas:**
- `snake_case` para pastas
- Agrupar por feature, nÃ£o por tipo

---

## 5. Regras de NegÃ³cio

### 5.1 Partidas

#### 5.1.1 InÃ­cio de Partida
1. Ambos jogadores devem confirmar prontidÃ£o
2. Time limite: 30 segundos
3. Cancelamento se um jogador nÃ£o confirmar
4. Penalidade: -10 ELO (apenas ranked) se cancelar apÃ³s matchmaking

#### 5.1.2 Durante a Partida
- **ConexÃ£o perdida**: 30 segundos de tolerÃ¢ncia
- **ReconexÃ£o**: Partida pausa automaticamente
- **Sem reconexÃ£o**: Derrota automÃ¡tica apÃ³s 30s
- **Pausa**: MÃ¡ximo 1 pausa de 2 minutos por partida
- **DesistÃªncia**: Derrota automÃ¡tica + penalidade no ranking

#### 5.1.3 Fim de Partida
1. Resultado final registrado
2. ELO atualizado (se ranked)
3. EstatÃ­sticas atualizadas
4. Recompensas distribuÃ­das
5. HistÃ³rico salvo

### 5.2 Sistema Anti-TrapaÃ§a

#### 5.2.1 ValidaÃ§Ãµes
- âœ… Todas as aÃ§Ãµes validadas no servidor
- âœ… VerificaÃ§Ã£o de tempo de resposta (< 100ms)
- âœ… DetecÃ§Ã£o de modificaÃ§Ã£o de dados
- âœ… Rate limiting: MÃ¡ximo 10 aÃ§Ãµes/segundo
- âœ… VerificaÃ§Ã£o de integridade do estado do jogo

#### 5.2.2 Penalidades
| InfraÃ§Ã£o | Penalidade |
|----------|-----------|
| Primeira | Aviso + -50 ELO |
| Segunda | Ban 3 dias + -100 ELO |
| Terceira | Ban permanente |

### 5.3 Economia do Jogo

#### 5.3.1 Moedas
**Ganhar:**
- **Cadastro inicial**: 500 moedas (para montar time inicial)
- VitÃ³ria: 50-100 moedas (baseado no tipo de partida)
- Empate: 25-50 moedas
- Objetivos diÃ¡rios: 50-200 moedas
- Torneios: 500-5000 moedas (baseado na posiÃ§Ã£o)
- Recompensas semanais: Baseado na divisÃ£o
- Venda de jogadores: 50% do valor de compra

**Gastar:**
- **Comprar jogadores**: 50-5000 moedas (baseado no nÃ­vel do jogador)
  - NÃ­vel 1-2: 50-150 moedas
  - NÃ­vel 3-4: 200-400 moedas
  - NÃ­vel 5-6: 500-800 moedas
  - NÃ­vel 7-8: 1000-1500 moedas
  - NÃ­vel 9-10: 2000-5000 moedas
- **Melhorar jogador**: 100-1000 moedas (treinamentos)
  - Treinamento BÃ¡sico: 100 moedas (+5 em uma stat)
  - Treinamento AvanÃ§ado: 250 moedas (+10 em uma stat)
  - Treinamento Elite: 500 moedas (+15 em uma stat)
  - Treinamento Completo: 1000 moedas (+5 em todas as stats)
- **Subir nÃ­vel de jogador**: 200-2000 moedas (200 Ã— nÃ­vel atual)
- Skins de uniforme: 200-1000 moedas (cosmÃ©ticos)
- Emojis de chat: 50-200 moedas
- Entrar em torneio: 100 moedas (reembolsÃ¡vel se chegar Ã s finais)

#### 5.3.2 Itens
- **Melhorias permanentes**: Aumentam stats do time
- **Skins cosmÃ©ticos**: Apenas visual
- **Boosters temporÃ¡rios**: NÃ£o permitidos em ranked
- **Emojis**: PersonalizaÃ§Ã£o do chat

---

## 6. Design System

### 6.1 Cores

**Paleta Principal:**
```dart
Primary: #2E7D32 (Verde campo)
Secondary: #1976D2 (Azul)
Accent: #FFC107 (Amarelo/Ouro)
Error: #D32F2F (Vermelho)
Success: #388E3C (Verde claro)
Background: #F5F5F5 (Cinza claro)
Surface: #FFFFFF (Branco)
```

**Cores do Campo:**
- Campo: #2E7D32 (Verde)
- Linhas: #FFFFFF (Branco)
- Ãrea do gol: #1B5E20 (Verde escuro)
- Centro: #FFFFFF (CÃ­rculo branco)

### 6.2 Tipografia

**Fontes:**
- **TÃ­tulos**: Roboto Bold
- **Corpo**: Roboto Regular
- **NÃºmeros**: Roboto Mono (placar, estatÃ­sticas)

**Tamanhos:**
```dart
displayLarge: 57px
displayMedium: 45px
displaySmall: 36px
headlineLarge: 32px
headlineMedium: 28px
headlineSmall: 24px
titleLarge: 22px
titleMedium: 16px
titleSmall: 14px
bodyLarge: 16px
bodyMedium: 14px
bodySmall: 12px
labelLarge: 14px
labelMedium: 12px
labelSmall: 11px
```

### 6.3 Componentes UI

**BotÃµes:**
- Primary: Verde, preenchido
- Secondary: Azul, outlined
- Text: Sem background, apenas texto

**Cards:**
- Elevation: 4dp
- Border radius: 16px
- Padding: 16px

**Inputs:**
- Border radius: 8px
- Height: 56px
- Padding: 16px

---

## 7. Requisitos NÃ£o-Funcionais

### 7.1 Performance

| MÃ©trica | Target | CrÃ­tico |
|---------|--------|---------|
| Tempo de resposta (aÃ§Ãµes) | < 100ms | < 200ms |
| FPS durante partida | 60 FPS | 30 FPS mÃ­nimo |
| Carregamento inicial | < 3s | < 5s |
| Tempo de matchmaking | < 30s | < 60s |

### 7.2 Escalabilidade
- Suportar 10.000+ usuÃ¡rios simultÃ¢neos
- Load balancing automÃ¡tico (Supabase)
- Cache de dados frequentes
- CDN para assets estÃ¡ticos

### 7.3 SeguranÃ§a
- âœ… Criptografia HTTPS/TLS
- âœ… ValidaÃ§Ã£o server-side de todas as aÃ§Ãµes
- âœ… Row Level Security (RLS) no Supabase
- âœ… ProteÃ§Ã£o contra SQL Injection
- âœ… Rate limiting
- âœ… Backup diÃ¡rio automÃ¡tico

### 7.4 Disponibilidade
- Uptime: 99.9%
- Sistema de fallback
- Monitoramento 24/7
- Alertas automÃ¡ticos

---

## 8. Roadmap e Fases

### Fase 1 - MVP (4-6 semanas)
**Objetivo**: Partida funcional bÃ¡sica

- [x] Setup do projeto
- [x] Estrutura de pastas
- [ ] IntegraÃ§Ã£o Supabase
- [ ] AutenticaÃ§Ã£o bÃ¡sica
- [ ] Tela de matchmaking
- [ ] Partida rÃ¡pida 1x1
- [ ] Sistema bÃ¡sico de ranking
- [ ] Interface de partida funcional
- [ ] Tela de resultado

**EntregÃ¡vel**: App funcional com partidas bÃ¡sicas

### Fase 2 - Core Features (4-6 semanas)
**Objetivo**: Funcionalidades essenciais

- [ ] Sistema de matchmaking melhorado
- [ ] Partidas rankeadas
- [ ] Sistema de amigos
- [ ] Chat bÃ¡sico (emojis)
- [ ] Perfil do usuÃ¡rio completo
- [ ] HistÃ³rico de partidas
- [ ] EstatÃ­sticas detalhadas

**EntregÃ¡vel**: App completo com ranking e social

### Fase 3 - Recursos AvanÃ§ados (6-8 semanas)
**Objetivo**: DiferenciaÃ§Ã£o competitiva

- [ ] Torneios
- [ ] Liga de amigos
- [ ] Sistema de conquistas
- [ ] Melhorias de time
- [ ] Economia do jogo
- [ ] NotificaÃ§Ãµes push
- [ ] Compartilhamento social

**EntregÃ¡vel**: App completo com todos os recursos

### Fase 4 - Polimento (4-6 semanas)
**Objetivo**: Qualidade e otimizaÃ§Ã£o

- [ ] AnimaÃ§Ãµes avanÃ§adas
- [ ] OtimizaÃ§Ãµes de performance
- [ ] Testes automatizados
- [ ] LocalizaÃ§Ã£o (i18n)
- [ ] Acessibilidade
- [ ] Analytics e mÃ©tricas

**EntregÃ¡vel**: App production-ready

---

## 9. PadrÃµes de CÃ³digo

### 9.1 Clean Architecture

**Camadas:**
1. **Presentation**: UI, Widgets, Providers
2. **Domain**: Entities, Use Cases, Repository Interfaces
3. **Data**: Models, Repository Implementations, Data Sources

**Regra**: DependÃªncias sempre apontam para dentro (Domain nÃ£o depende de Data)

### 9.2 State Management (Riverpod)

**Providers:**
```dart
// State Provider (simples)
final counterProvider = StateProvider<int>((ref) => 0);

// Future Provider (async)
final userProvider = FutureProvider<User>((ref) async {
  return await ref.read(authRepositoryProvider).getCurrentUser();
});

// State Notifier (complexo)
final matchProvider = StateNotifierProvider<MatchNotifier, MatchState>((ref) {
  return MatchNotifier(ref.read(matchRepositoryProvider));
});
```

### 9.3 Tratamento de Erros

**Either Pattern:**
```dart
typedef Result<T> = Either<Failure, T>;

// Uso
Result<User> login(String email, String password) {
  try {
    final user = await authRepository.login(email, password);
    return Right(user);
  } catch (e) {
    return Left(ServerFailure(e.toString()));
  }
}
```

### 9.4 Testes

**Estrutura:**
```
test/
â”œâ”€â”€ unit/              # Testes unitÃ¡rios
â”œâ”€â”€ widget/            # Testes de widgets
â””â”€â”€ integration/       # Testes de integraÃ§Ã£o
```

**Cobertura mÃ­nima**: 70%

---

## 10. APIs e IntegraÃ§Ãµes

### 10.1 Supabase

**Tabelas Principais:**
```sql
-- Users (extend Supabase Auth)
profiles (
  id UUID PRIMARY KEY REFERENCES auth.users,
  username TEXT UNIQUE,
  avatar_url TEXT,
  elo INTEGER DEFAULT 1000,
  division TEXT DEFAULT 'bronze',
  wins INTEGER DEFAULT 0,
  losses INTEGER DEFAULT 0,
  draws INTEGER DEFAULT 0,
  coins INTEGER DEFAULT 500,  -- Moedas iniciais aumentadas para 500
  created_at TIMESTAMP
)

-- Teams (Times dos usuÃ¡rios)
teams (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  formation TEXT DEFAULT '4-4-2',
  attack INTEGER DEFAULT 50,  -- 0-100
  defense INTEGER DEFAULT 50,  -- 0-100
  midfield INTEGER DEFAULT 50,  -- 0-100
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id)  -- Um time por usuÃ¡rio
)

-- Players (Jogadores)
players (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  team_id UUID NOT NULL REFERENCES teams(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  position TEXT NOT NULL,  -- goalkeeper, defender, midfielder, forward
  level INTEGER DEFAULT 1,  -- 1-10
  attack INTEGER DEFAULT 20,  -- 0-100
  defense INTEGER DEFAULT 20,  -- 0-100
  midfield INTEGER DEFAULT 20,  -- 0-100
  speed INTEGER DEFAULT 20,  -- 0-100
  experience INTEGER DEFAULT 0,  -- XP atual
  experience_to_next_level INTEGER DEFAULT 100,  -- XP necessÃ¡rio para prÃ³ximo nÃ­vel
  value INTEGER DEFAULT 100,  -- Valor em moedas
  is_starter BOOLEAN DEFAULT false,  -- Se estÃ¡ na escalaÃ§Ã£o titular
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
)

-- Player Market (Mercado de Jogadores)
player_market (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  player_template_id TEXT,  -- ID do template do jogador
  name TEXT NOT NULL,
  position TEXT NOT NULL,
  level INTEGER NOT NULL,
  base_attack INTEGER,
  base_defense INTEGER,
  base_midfield INTEGER,
  base_speed INTEGER,
  price INTEGER NOT NULL,  -- PreÃ§o em moedas
  available_until TIMESTAMP,  -- Data de expiraÃ§Ã£o no mercado
  created_at TIMESTAMP DEFAULT NOW()
)

-- Matches
matches (
  id UUID PRIMARY KEY,
  player1_id UUID REFERENCES profiles(id),
  player2_id UUID REFERENCES profiles(id),
  player1_team TEXT,
  player2_team TEXT,
  player1_score INTEGER DEFAULT 0,
  player2_score INTEGER DEFAULT 0,
  status TEXT, -- waiting, in_progress, finished, cancelled
  type TEXT, -- quick, ranked, tournament, friendly
  winner_id UUID REFERENCES profiles(id),
  created_at TIMESTAMP,
  started_at TIMESTAMP,
  finished_at TIMESTAMP
)

-- Rankings
rankings (
  user_id UUID PRIMARY KEY REFERENCES profiles(id),
  elo INTEGER,
  division TEXT,
  position INTEGER,
  updated_at TIMESTAMP
)

-- Tournaments
tournaments (
  id UUID PRIMARY KEY,
  name TEXT,
  start_date TIMESTAMP,
  end_date TIMESTAMP,
  max_participants INTEGER,
  status TEXT, -- registration, in_progress, finished
  winner_id UUID REFERENCES profiles(id)
)

-- Friends
friendships (
  id UUID PRIMARY KEY,
  user1_id UUID REFERENCES profiles(id),
  user2_id UUID REFERENCES profiles(id),
  status TEXT, -- pending, accepted, blocked
  created_at TIMESTAMP
)
```

### 10.2 Edge Functions (Supabase)

**FunÃ§Ãµes NecessÃ¡rias:**
- `matchmaking`: LÃ³gica de busca de oponente
- `game-server`: Servidor autoritativo da partida
- `elo-calculation`: CÃ¡lculo de ELO apÃ³s partida
- `tournament-bracket`: GeraÃ§Ã£o de chaves
- `create-initial-team`: Cria time inicial com 11 jogadores ao cadastrar
- `buy-player`: Processa compra de jogador do mercado
- `sell-player`: Processa venda de jogador
- `train-player`: Aplica melhorias de treinamento
- `level-up-player`: Processa subida de nÃ­vel do jogador
- `update-player-xp`: Atualiza XP dos jogadores apÃ³s partida

### 10.3 WebSockets

**Eventos:**
```dart
// Cliente â†’ Servidor
- join_match
- player_action
- pause_match
- leave_match

// Servidor â†’ Cliente
- match_started
- game_state_update
- player_scored
- match_ended
```

---

## 11. MÃ©tricas e KPIs

### 11.1 MÃ©tricas de Produto

**Engajamento:**
- DAU (Daily Active Users)
- MAU (Monthly Active Users)
- SessÃµes por usuÃ¡rio
- Tempo mÃ©dio de sessÃ£o
- Partidas por usuÃ¡rio/dia

**RetenÃ§Ã£o:**
- D1 Retention: > 40%
- D7 Retention: > 30%
- D30 Retention: > 15%

**ConversÃ£o:**
- Taxa de registro (visitantes â†’ usuÃ¡rios)
- Taxa de primeira partida
- Taxa de retorno (usuÃ¡rios que voltam)

### 11.2 MÃ©tricas TÃ©cnicas

- Tempo de resposta mÃ©dio
- Taxa de erro
- Uptime
- LatÃªncia de rede
- FPS mÃ©dio durante partidas

### 11.3 Metas Iniciais (Primeiro MÃªs)

- 1.000 usuÃ¡rios registrados
- 100 partidas/dia
- RetenÃ§Ã£o D7 > 30%
- RetenÃ§Ã£o D30 > 15%
- NPS > 50

---

## 12. ConsideraÃ§Ãµes Finais

### 12.1 MonetizaÃ§Ã£o (Futuro)

**Modelo:**
- **Gratuito**: Todas as funcionalidades bÃ¡sicas
- **CosmÃ©ticos**: Skins, emojis, avatares
- **Battle Pass**: Recompensas sazonais
- **AnÃºncios**: Apenas apÃ³s partidas (nÃ£o durante)

**PrincÃ­pio**: Nunca pay-to-win, apenas cosmÃ©ticos

### 12.2 LocalizaÃ§Ã£o

**Idiomas:**
1. PortuguÃªs (BR) - Prioridade
2. InglÃªs
3. Espanhol

**Futuro**: FrancÃªs, AlemÃ£o, Italiano

### 12.3 Acessibilidade

- Suporte a leitores de tela
- Alto contraste
- Tamanhos de fonte ajustÃ¡veis
- Controles alternativos

---

**VersÃ£o**: 2.0  
**Ãšltima AtualizaÃ§Ã£o**: 2024  
**Status**: Em Desenvolvimento - Fase 1 (MVP)  
**Mantido por**: Equipe Football Online
